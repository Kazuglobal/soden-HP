<section id="contact" class="relative py-20 sm:py-28 lg:py-32 bg-slate-100 overflow-hidden font-sans">
  <!-- Photo Collage Background -->
  <div class="absolute inset-0 z-0 pointer-events-none">
    <!-- Top-left angled photo -->
    <div class="absolute top-0 left-0 w-1/3 h-2/3 -rotate-6 origin-top-left overflow-hidden opacity-80">
      <img src="/images/contact/contact1.png" alt="電気工事の設計" class="w-full h-full object-cover">
    </div>
    <!-- Bottom-left angled photo -->
    <div class="absolute bottom-0 left-0 w-1/4 h-1/2 rotate-3 origin-bottom-left overflow-hidden opacity-80">
      <img src="/images/contact/contact2.png" alt="電気工事作業" class="w-full h-full object-cover">
    </div>
    <!-- Top-right angled photo -->
    <div class="absolute top-0 right-0 w-1/4 h-1/2 rotate-6 origin-top-right overflow-hidden opacity-80">
      <img src="/images/contact/contact3.png" alt="電気設備点検" class="w-full h-full object-cover">
    </div>
    <!-- Bottom-right angled photo -->
    <div class="absolute bottom-0 right-0 w-1/3 h-2/3 -rotate-3 origin-bottom-right overflow-hidden opacity-80">
      <img src="/images/contact/contact4.png" alt="インフラ整備" class="w-full h-full object-cover">
    </div>
    <!-- Center gradient overlay for text legibility -->
    <div class="absolute inset-0 bg-gradient-radial from-slate-100/95 via-slate-100/80 to-transparent"></div>
  </div>

  <div class="container mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
    <!-- Header Section -->
    <div class="text-center mb-12 lg:mb-16">
      <!-- Handwritten Tag with underline -->
      <div appGsapAnimate [animation]="'fadeUp'" [delay]="0.1" class="mb-6">
        <p class="text-[#2c5282] text-5xl md:text-6xl italic" style="font-family: 'Caveat', cursive;">
          Contact
        </p>
        <div class="w-20 h-1 bg-gradient-to-r from-[#2c5282] to-blue-400 mt-2 mx-auto rounded-full"></div>
      </div>

      <!-- Main Title -->
      <h2 appGsapAnimate [animation]="'fadeUp'" [delay]="0.2"
        class="text-3xl md:text-4xl lg:text-5xl font-bold text-slate-800 tracking-tight mb-6"
        style="font-family: 'Noto Serif JP', serif;">
        お仕事のご依頼・相談
      </h2>

      <!-- Decorative Dotted Line -->
      <div appGsapAnimate [animation]="'fadeUp'" [delay]="0.3"
        class="w-64 mx-auto border-t-2 border-dotted border-slate-300 mb-8"></div>

      <!-- Description -->
      <p appGsapAnimate [animation]="'fadeUp'" [delay]="0.4"
        class="text-slate-600 text-base md:text-lg leading-relaxed max-w-2xl mx-auto">
        電気設備工事のプロフェッショナルとして、<br class="hidden sm:inline">
        お見積りからアフターサービスまで、スピーディかつ丁寧に対応します。<br class="hidden sm:inline">
        八戸地域の電気工事なら、創電工業へ。
      </p>
    </div>

    <!-- Phone Number Section -->
    <div appGsapAnimate [animation]="'fadeUp'" [delay]="0.5" class="text-center mb-10">
      <a href="tel:0178252172"
        class="inline-flex items-center gap-3 text-[#2c5282] hover:text-blue-700 transition-colors duration-300">
        <span class="text-lg font-medium">TEL.</span>
        <span class="text-4xl md:text-5xl lg:text-6xl font-bold tracking-wide"
          style="font-family: 'Roboto', sans-serif;">
          0178-25-2172
        </span>
      </a>
      <p class="text-slate-500 mt-3 text-sm">
        [受付時間] 平日8:00-18:00
      </p>
    </div>

    <!-- CTA Button -->
    <div appGsapAnimate [animation]="'fadeUp'" [delay]="0.6" class="text-center mb-16">
      <button (click)="showForm = true"
        class="inline-flex items-center gap-3 bg-gradient-to-r from-[#2c5282] to-blue-700 text-white px-12 py-5 rounded-lg text-base font-bold tracking-wider hover:from-blue-700 hover:to-blue-800 transition-all duration-300 shadow-xl hover:shadow-2xl hover:-translate-y-0.5">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"
          stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
        </svg>
        <span>お問い合わせフォーム</span>
      </button>
    </div>

    <!-- Form Section (Collapsible) -->
    <div *ngIf="showForm" class="max-w-2xl mx-auto bg-white rounded-2xl shadow-xl p-8 sm:p-12 animate-fade-in">
      <div class="flex justify-between items-center mb-8">
        <h3 class="text-2xl font-bold text-slate-800" style="font-family: 'Noto Serif JP', serif;">お問い合わせフォーム</h3>
        <button (click)="showForm = false" class="text-slate-400 hover:text-slate-600 transition-colors">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"
            stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>

      <!-- Success Message -->
      <div *ngIf="submitStatus === 'success'"
        class="mb-8 p-6 bg-green-50 border border-green-200 rounded-xl text-center">
        <div class="text-green-600 text-5xl mb-4">✓</div>
        <h3 class="text-xl font-bold text-green-800 mb-2">送信完了</h3>
        <p class="text-green-700">お問い合わせありがとうございます。<br>担当者より折り返しご連絡いたします。</p>
        <button (click)="resetStatus()" class="mt-4 text-green-600 underline hover:text-green-800">
          新しいお問い合わせを送信する
        </button>
      </div>

      <!-- Error Message -->
      <div *ngIf="submitStatus === 'error'" class="mb-8 p-6 bg-red-50 border border-red-200 rounded-xl">
        <div class="flex items-center mb-2">
          <span class="text-red-600 text-2xl mr-2">⚠</span>
          <h3 class="text-lg font-bold text-red-800">送信エラー</h3>
        </div>
        <p class="text-red-700">{{ errorMessage }}</p>
        <button (click)="resetStatus()" class="mt-4 text-red-600 underline hover:text-red-800">
          再度送信する
        </button>
      </div>

      <!-- Form -->
      <form *ngIf="submitStatus !== 'success'" [formGroup]="contactForm" (ngSubmit)="onSubmit()" class="space-y-6">

        <!-- Name -->
        <div>
          <label for="name" class="block text-sm font-bold text-gray-700 mb-2">お名前 <span
              class="text-red-500">*</span></label>
          <input type="text" id="name" formControlName="name"
            class="w-full px-4 py-3 rounded-lg bg-slate-50 border border-gray-200 focus:border-blue-500 focus:bg-white focus:ring-2 focus:ring-blue-200 transition duration-200 outline-none"
            [ngClass]="{'border-red-500': contactForm.get('name')?.invalid && contactForm.get('name')?.touched}"
            placeholder="山田 太郎">
          <p *ngIf="contactForm.get('name')?.invalid && contactForm.get('name')?.touched"
            class="text-red-500 text-xs mt-1">お名前を入力してください。</p>
        </div>

        <!-- Email -->
        <div>
          <label for="email" class="block text-sm font-bold text-gray-700 mb-2">メールアドレス <span
              class="text-red-500">*</span></label>
          <input type="email" id="email" formControlName="email"
            class="w-full px-4 py-3 rounded-lg bg-slate-50 border border-gray-200 focus:border-blue-500 focus:bg-white focus:ring-2 focus:ring-blue-200 transition duration-200 outline-none"
            [ngClass]="{'border-red-500': contactForm.get('email')?.invalid && contactForm.get('email')?.touched}"
            placeholder="example@soden.co.jp">
          <p *ngIf="contactForm.get('email')?.invalid && contactForm.get('email')?.touched"
            class="text-red-500 text-xs mt-1">有効なメールアドレスを入力してください。</p>
        </div>

        <!-- Subject -->
        <div>
          <label for="subject" class="block text-sm font-bold text-gray-700 mb-2">件名 <span
              class="text-red-500">*</span></label>
          <input type="text" id="subject" formControlName="subject"
            class="w-full px-4 py-3 rounded-lg bg-slate-50 border border-gray-200 focus:border-blue-500 focus:bg-white focus:ring-2 focus:ring-blue-200 transition duration-200 outline-none"
            [ngClass]="{'border-red-500': contactForm.get('subject')?.invalid && contactForm.get('subject')?.touched}"
            placeholder="お見積りについて">
          <p *ngIf="contactForm.get('subject')?.invalid && contactForm.get('subject')?.touched"
            class="text-red-500 text-xs mt-1">件名を入力してください。</p>
        </div>

        <!-- Message -->
        <div>
          <label for="message" class="block text-sm font-bold text-gray-700 mb-2">お問い合わせ内容 <span
              class="text-red-500">*</span></label>
          <textarea id="message" formControlName="message" rows="5"
            class="w-full px-4 py-3 rounded-lg bg-slate-50 border border-gray-200 focus:border-blue-500 focus:bg-white focus:ring-2 focus:ring-blue-200 transition duration-200 outline-none resize-none"
            [ngClass]="{'border-red-500': contactForm.get('message')?.invalid && contactForm.get('message')?.touched}"
            placeholder="ご自由にご記入ください"></textarea>
          <p *ngIf="contactForm.get('message')?.invalid && contactForm.get('message')?.touched"
            class="text-red-500 text-xs mt-1">お問い合わせ内容を入力してください。</p>
        </div>

        <!-- Submit Button -->
        <div class="mt-8 text-center">
          <button type="submit" [disabled]="contactForm.invalid || submitted"
            class="inline-flex items-center justify-center w-full sm:w-auto min-w-[200px] bg-[#2c5282] text-white px-10 py-4 rounded-lg text-base font-bold uppercase tracking-wider hover:bg-blue-800 hover:shadow-lg disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed transition-all duration-300 shadow-md">
            <span *ngIf="submitStatus === 'sending'"
              class="inline-block w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"></span>
            {{ submitStatus === 'sending' ? '送信中...' : '送信する' }}
          </button>
        </div>

      </form>
    </div>
  </div>
</section>