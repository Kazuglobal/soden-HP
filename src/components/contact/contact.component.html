<section class="py-24 sm:py-32 bg-white relative overflow-hidden font-sans">
  <!-- Technical "Road" Cable Trace for Contact Section -->
  <div class="absolute inset-0 z-0 pointer-events-none overflow-hidden">
    <div class="absolute inset-0 flex items-center justify-center opacity-60 mix-blend-multiply">
      <img src="/images/soden_roadmap.png" alt="Soden Technical Roadmap"
        class="w-full h-auto min-h-full object-cover lg:object-contain rotate-[-15deg] scale-150 -translate-x-1/3 translate-y-1/3">
    </div>
  </div>

  <div class="container mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
    <div class="text-center mb-16 lg:mb-24">
      <div class="inline-flex items-center gap-3 mb-6" appGsapAnimate [animation]="'fadeUp'">
        <div class="w-8 h-[1px] bg-emerald-500"></div>
        <span class="text-xs font-bold text-emerald-600 tracking-[0.5em] uppercase">Get in Touch</span>
        <div class="w-8 h-[1px] bg-emerald-500"></div>
      </div>
      <h2 class="text-5xl md:text-6xl lg:text-7xl font-black text-slate-900 tracking-tight leading-none mb-8"
        style="font-family: 'Noto Serif JP', serif;" appGsapAnimate [animation]="'fadeUp'" [duration]="1.2">
        お問い合わせ
      </h2>
      <p appGsapAnimate [animation]="'fadeUp'" [delay]="0.3"
        class="mt-6 max-w-2xl mx-auto text-slate-600 leading-relaxed font-medium">
        電気設備工事に関するご相談、お見積りのご依頼、採用に関するご質問など、<br class="hidden sm:inline">どのようなことでもお気軽にお問い合わせください。
      </p>
    </div>

    <div appGsapAnimate [animation]="'fadeUp'" [duration]="0.7" [distance]="50" [threshold]="0.15"
      class="max-w-2xl mx-auto bg-slate-50 border border-slate-100 rounded-3xl shadow-xl p-8 sm:p-12">

      <!-- 成功メッセージ -->
      <div *ngIf="submitStatus === 'success'"
        class="mb-8 p-6 bg-green-50 border border-green-200 rounded-xl text-center">
        <div class="text-green-600 text-5xl mb-4">✓</div>
        <h3 class="text-xl font-bold text-green-800 mb-2">送信完了</h3>
        <p class="text-green-700">お問い合わせありがとうございます。<br>担当者より折り返しご連絡いたします。</p>
        <button (click)="resetStatus()" class="mt-4 text-green-600 underline hover:text-green-800">
          新しいお問い合わせを送信する
        </button>
      </div>

      <!-- エラーメッセージ -->
      <div *ngIf="submitStatus === 'error'" class="mb-8 p-6 bg-red-50 border border-red-200 rounded-xl">
        <div class="flex items-center mb-2">
          <span class="text-red-600 text-2xl mr-2">⚠</span>
          <h3 class="text-lg font-bold text-red-800">送信エラー</h3>
        </div>
        <p class="text-red-700">{{ errorMessage }}</p>
        <button (click)="resetStatus()" class="mt-4 text-red-600 underline hover:text-red-800">
          再度送信する
        </button>
      </div>

      <!-- フォーム -->
      <form *ngIf="submitStatus !== 'success'" [formGroup]="contactForm" (ngSubmit)="onSubmit()" class="space-y-6">

        <!-- Name -->
        <div>
          <label for="name" class="block text-sm font-bold text-gray-700 mb-2">お名前 <span
              class="text-red-500">*</span></label>
          <input type="text" id="name" formControlName="name"
            class="w-full px-4 py-3 rounded-lg bg-white border border-gray-200 focus:border-emerald-500 focus:bg-white focus:ring-2 focus:ring-emerald-200 transition duration-200 outline-none"
            [ngClass]="{'border-red-500': contactForm.get('name')?.invalid && contactForm.get('name')?.touched}"
            placeholder="山田 太郎">
          <p *ngIf="contactForm.get('name')?.invalid && contactForm.get('name')?.touched"
            class="text-red-500 text-xs mt-1">お名前を入力してください。</p>
        </div>

        <!-- Email -->
        <div>
          <label for="email" class="block text-sm font-bold text-gray-700 mb-2">メールアドレス <span
              class="text-red-500">*</span></label>
          <input type="email" id="email" formControlName="email"
            class="w-full px-4 py-3 rounded-lg bg-white border border-gray-200 focus:border-emerald-500 focus:bg-white focus:ring-2 focus:ring-emerald-200 transition duration-200 outline-none"
            [ngClass]="{'border-red-500': contactForm.get('email')?.invalid && contactForm.get('email')?.touched}"
            placeholder="example@soden.co.jp">
          <p *ngIf="contactForm.get('email')?.invalid && contactForm.get('email')?.touched"
            class="text-red-500 text-xs mt-1">有効なメールアドレスを入力してください。</p>
        </div>

        <!-- Subject -->
        <div>
          <label for="subject" class="block text-sm font-bold text-gray-700 mb-2">件名 <span
              class="text-red-500">*</span></label>
          <input type="text" id="subject" formControlName="subject"
            class="w-full px-4 py-3 rounded-lg bg-white border border-gray-200 focus:border-emerald-500 focus:bg-white focus:ring-2 focus:ring-emerald-200 transition duration-200 outline-none"
            [ngClass]="{'border-red-500': contactForm.get('subject')?.invalid && contactForm.get('subject')?.touched}"
            placeholder="お見積りについて">
          <p *ngIf="contactForm.get('subject')?.invalid && contactForm.get('subject')?.touched"
            class="text-red-500 text-xs mt-1">件名を入力してください。</p>
        </div>

        <!-- Message -->
        <div>
          <label for="message" class="block text-sm font-bold text-gray-700 mb-2">お問い合わせ内容 <span
              class="text-red-500">*</span></label>
          <textarea id="message" formControlName="message" rows="5"
            class="w-full px-4 py-3 rounded-lg bg-white border border-gray-200 focus:border-emerald-500 focus:bg-white focus:ring-2 focus:ring-emerald-200 transition duration-200 outline-none resize-none"
            [ngClass]="{'border-red-500': contactForm.get('message')?.invalid && contactForm.get('message')?.touched}"
            placeholder="ご自由にご記入ください"></textarea>
          <p *ngIf="contactForm.get('message')?.invalid && contactForm.get('message')?.touched"
            class="text-red-500 text-xs mt-1">お問い合わせ内容を入力してください。</p>
        </div>

        <!-- Submit Button -->
        <div class="mt-8 text-center">
          <button type="submit" [disabled]="contactForm.invalid || submitted"
            class="inline-flex items-center justify-center w-full sm:w-auto min-w-[200px] bg-emerald-600 text-white px-10 py-4 rounded-full text-base font-bold uppercase tracking-wider hover:bg-emerald-700 hover:shadow-lg disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed transition-all duration-300 shadow-md">
            <span *ngIf="submitStatus === 'sending'"
              class="inline-block w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"></span>
            {{ submitStatus === 'sending' ? '送信中...' : '送信する' }}
          </button>
        </div>

      </form>
    </div>
  </div>
</section>