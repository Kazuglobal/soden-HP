<section class="py-16 sm:py-24 bg-gray-50 text-gray-800">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <h2 appGsapSplitText
        [splitType]="'chars'"
        [delay]="60"
        [duration]="0.5"
        [ease]="'power3.out'"
        [from]="{ opacity: 0, y: 30 }"
        [to]="{ opacity: 1, y: 0 }"
        [threshold]="0.2"
        class="text-4xl sm:text-5xl font-extrabold text-[#0c1c2d] tracking-wider mb-4">
        お問い合わせ
      </h2>
      <p appGsapAnimate
        [animation]="'fadeUp'"
        [duration]="0.5"
        [delay]="0.2"
        [distance]="20"
        [threshold]="0.2"
        class="text-xl font-semibold text-[#0c1c2d]">
        Contact Us
      </p>
      <p appGsapAnimate
        [animation]="'fadeIn'"
        [duration]="0.6"
        [delay]="0.4"
        [threshold]="0.2"
        class="mt-6 max-w-2xl mx-auto text-gray-600 leading-relaxed">
        電気設備工事に関するご相談、お見積りのご依頼、採用に関するご質問など、<br class="hidden sm:inline">どのようなことでもお気軽にお問い合わせください。
      </p>
    </div>

    <div appGsapAnimate
      [animation]="'fadeUp'"
      [duration]="0.7"
      [distance]="50"
      [threshold]="0.15"
      class="max-w-2xl mx-auto bg-white rounded-3xl shadow-xl p-8 sm:p-12">

      <!-- 成功メッセージ -->
      <div *ngIf="submitStatus === 'success'" class="mb-8 p-6 bg-green-50 border border-green-200 rounded-xl text-center">
        <div class="text-green-600 text-5xl mb-4">✓</div>
        <h3 class="text-xl font-bold text-green-800 mb-2">送信完了</h3>
        <p class="text-green-700">お問い合わせありがとうございます。<br>担当者より折り返しご連絡いたします。</p>
        <button (click)="resetStatus()" class="mt-4 text-green-600 underline hover:text-green-800">
          新しいお問い合わせを送信する
        </button>
      </div>

      <!-- エラーメッセージ -->
      <div *ngIf="submitStatus === 'error'" class="mb-8 p-6 bg-red-50 border border-red-200 rounded-xl">
        <div class="flex items-center mb-2">
          <span class="text-red-600 text-2xl mr-2">⚠</span>
          <h3 class="text-lg font-bold text-red-800">送信エラー</h3>
        </div>
        <p class="text-red-700">{{ errorMessage }}</p>
        <button (click)="resetStatus()" class="mt-4 text-red-600 underline hover:text-red-800">
          再度送信する
        </button>
      </div>

      <!-- フォーム -->
      <form *ngIf="submitStatus !== 'success'" [formGroup]="contactForm" (ngSubmit)="onSubmit()" class="space-y-6">

        <!-- Name -->
        <div>
          <label for="name" class="block text-sm font-bold text-gray-700 mb-2">お名前 <span
              class="text-red-500">*</span></label>
          <input type="text" id="name" formControlName="name"
            class="w-full px-4 py-3 rounded-lg bg-gray-50 border border-gray-300 focus:border-blue-500 focus:bg-white focus:ring-2 focus:ring-blue-200 transition duration-200 outline-none"
            [ngClass]="{'border-red-500': contactForm.get('name')?.invalid && contactForm.get('name')?.touched}"
            placeholder="山田 太郎">
          <p *ngIf="contactForm.get('name')?.invalid && contactForm.get('name')?.touched"
            class="text-red-500 text-xs mt-1">お名前を入力してください。</p>
        </div>

        <!-- Email -->
        <div>
          <label for="email" class="block text-sm font-bold text-gray-700 mb-2">メールアドレス <span
              class="text-red-500">*</span></label>
          <input type="email" id="email" formControlName="email"
            class="w-full px-4 py-3 rounded-lg bg-gray-50 border border-gray-300 focus:border-blue-500 focus:bg-white focus:ring-2 focus:ring-blue-200 transition duration-200 outline-none"
            [ngClass]="{'border-red-500': contactForm.get('email')?.invalid && contactForm.get('email')?.touched}"
            placeholder="example@soden.co.jp">
          <p *ngIf="contactForm.get('email')?.invalid && contactForm.get('email')?.touched"
            class="text-red-500 text-xs mt-1">有効なメールアドレスを入力してください。</p>
        </div>

        <!-- Subject -->
        <div>
          <label for="subject" class="block text-sm font-bold text-gray-700 mb-2">件名 <span
              class="text-red-500">*</span></label>
          <input type="text" id="subject" formControlName="subject"
            class="w-full px-4 py-3 rounded-lg bg-gray-50 border border-gray-300 focus:border-blue-500 focus:bg-white focus:ring-2 focus:ring-blue-200 transition duration-200 outline-none"
            [ngClass]="{'border-red-500': contactForm.get('subject')?.invalid && contactForm.get('subject')?.touched}"
            placeholder="お見積りについて">
          <p *ngIf="contactForm.get('subject')?.invalid && contactForm.get('subject')?.touched"
            class="text-red-500 text-xs mt-1">件名を入力してください。</p>
        </div>

        <!-- Message -->
        <div>
          <label for="message" class="block text-sm font-bold text-gray-700 mb-2">お問い合わせ内容 <span
              class="text-red-500">*</span></label>
          <textarea id="message" formControlName="message" rows="5"
            class="w-full px-4 py-3 rounded-lg bg-gray-50 border border-gray-300 focus:border-blue-500 focus:bg-white focus:ring-2 focus:ring-blue-200 transition duration-200 outline-none resize-none"
            [ngClass]="{'border-red-500': contactForm.get('message')?.invalid && contactForm.get('message')?.touched}"
            placeholder="ご自由にご記入ください"></textarea>
          <p *ngIf="contactForm.get('message')?.invalid && contactForm.get('message')?.touched"
            class="text-red-500 text-xs mt-1">お問い合わせ内容を入力してください。</p>
        </div>

        <!-- Submit Button -->
        <div class="mt-8 text-center">
          <button type="submit" [disabled]="contactForm.invalid || submitted"
            class="inline-flex items-center justify-center w-full sm:w-auto min-w-[200px] bg-[#d4a876] text-[#0c1c2d] px-10 py-4 rounded-full text-base font-bold uppercase tracking-wider hover:bg-[#ff8c42] hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-md">
            <span *ngIf="submitStatus === 'sending'" class="inline-block w-5 h-5 border-2 border-[#0c1c2d] border-t-transparent rounded-full animate-spin mr-2"></span>
            {{ submitStatus === 'sending' ? '送信中...' : '送信する' }}
          </button>
        </div>

      </form>
    </div>
  </div>
</section>
