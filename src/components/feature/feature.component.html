<section class="selection:bg-emerald-500/30 overflow-hidden bg-[#F8FAFC]">

  <!-- Section 1: 施工事例 (Cinematic Split Screen) -->
  <div class="relative min-h-[80vh] flex flex-col lg:flex-row bg-white">
    <!-- Visual Area (Left 60%) -->
    <div class="w-full lg:col-span-6 lg:w-[60%] relative overflow-hidden group">
      <div appGsapAnimate [animation]="'fadeIn'" [duration]="1.5" class="h-full">
        <img [src]="craftsmanship.image" alt="施工実績"
          class="w-full h-full object-cover grayscale-[30%] group-hover:grayscale-0 transition-all duration-1000 scale-[1.02] group-hover:scale-100">
      </div>
      <div class="absolute inset-0 bg-gradient-to-r from-black/20 to-transparent"></div>
      <div class="absolute bottom-8 left-8 text-white/80 text-xs font-medium tracking-widest uppercase" appGsapAnimate
        [animation]="'fadeRight'" [delay]="0.8">
        Featured Project: みらいの森保育園
      </div>
    </div>

    <!-- Content Area (Right 40%) -->
    <div class="w-full lg:w-[40%] bg-white p-8 lg:p-16 flex flex-col justify-center">
      <div class="max-w-md">
        <h4 class="text-emerald-600 font-bold tracking-widest text-sm mb-4 uppercase" appGsapAnimate
          [animation]="'fadeUp'" [delay]="0.2">{{ craftsmanship.subtitle }}</h4>
        <h2 class="text-3xl md:text-4xl font-black text-[#0C1C2D] leading-snug mb-8"
          style="font-family: 'Noto Serif JP', serif;" appGsapAnimate [animation]="'fadeUp'" [delay]="0.4">
          {{ craftsmanship.title }}
        </h2>
        <p class="text-slate-600 leading-relaxed text-sm lg:text-base mb-12"
          style="font-family: 'Noto Sans JP', sans-serif;" appGsapAnimate [animation]="'fadeUp'" [delay]="0.6">
          {{ craftsmanship.description }}
        </p>

        <!-- SDGs Integration -->
        <div class="mb-12" appGsapAnimate [animation]="'fadeUp'" [delay]="0.8">
          <p class="text-[10px] font-bold text-slate-400 tracking-widest uppercase mb-4">本プロジェクトのSDGs貢献</p>
          <div class="flex flex-wrap gap-2">
            @for (id of craftsmanship.sdgs; track id) {
            <div
              class="w-10 h-10 rounded shadow-sm flex items-center justify-center text-white text-xs font-black transition-transform hover:scale-110 cursor-help"
              [style.background-color]="getSdgColor(id)" [title]="getSdgGoal(id)">
              {{ id }}
            </div>
            }
          </div>
        </div>

      </div>
    </div>
  </div>


  <!-- Section 2: SDGsに取り組んでいます (High Visibility Roadmap) -->
  <div class="py-24 lg:py-40 bg-white relative overflow-hidden">
    <!-- Technical "Road" Background (Hidden on mobile) -->
    <div class="absolute inset-0 z-0 pointer-events-none overflow-hidden hidden md:block">
      <div class="absolute inset-0 flex items-start justify-center opacity-50 pt-16">
        <img src="/images/soden_roadmap.png" alt="Soden Technical Roadmap"
          class="w-auto h-auto max-w-xl lg:max-w-2xl object-contain rotate-[-5deg]">
      </div>
    </div>
    <div class="container mx-auto px-4 relative z-10">
      <div class="text-center mb-16 lg:mb-24 relative z-10">
        <div class="inline-block bg-white/90 backdrop-blur-sm px-8 py-6 rounded-3xl shadow-sm border border-slate-100">
          <h2 class="text-3xl md:text-5xl font-black text-[#0C1C2D] mb-6" style="font-family: 'Noto Serif JP', serif;"
            appGsapAnimate [animation]="'fadeUp'">
            {{ sdgCommitment.title }}
          </h2>
          <p class="text-emerald-700 font-medium tracking-wide" appGsapAnimate [animation]="'fadeUp'" [delay]="0.2">
            {{ sdgCommitment.lead }}
          </p>
        </div>
      </div>

      <!-- Committed Card -->
      <div
        class="max-w-5xl mx-auto bg-white rounded-[2rem] shadow-2xl overflow-hidden flex flex-col md:flex-row min-h-[400px]"
        appGsapAnimate [animation]="'scaleIn'" [duration]="1.2">
        <!-- Photo Side -->
        <div class="md:w-1/2 relative overflow-hidden group">
          <img [src]="sdgCommitment.image"
            class="w-full h-full object-cover transition-transform duration-1000 group-hover:scale-110" alt="太陽光パネル">
          <div class="absolute inset-0 bg-emerald-900/10"></div>
        </div>

        <!-- Data Side -->
        <div class="md:w-1/2 p-8 lg:p-14 flex flex-col justify-center">
          <div class="flex items-center gap-8 mb-10">
            <div class="relative w-32 h-32 flex items-center justify-center p-4 overflow-visible">
              <svg viewBox="0 0 120 120" class="w-full h-full transform -rotate-90 overflow-visible">
                <circle cx="60" cy="60" r="46" stroke="currentColor" stroke-width="8" fill="transparent"
                  class="text-emerald-50" />
                <circle cx="60" cy="60" r="46" stroke="currentColor" stroke-width="8" fill="transparent"
                  class="text-emerald-500" [attr.stroke-dasharray]="289.03" stroke-dashoffset="0" appGsapAnimate
                  [animation]="'fadeIn'" [duration]="2" />
              </svg>
              <div class="absolute inset-0 flex flex-col items-center justify-center">
                <span class="text-3xl font-black text-emerald-900 leading-none" appCountUp
                  [countTo]="sdgCommitment.metric">0</span>
                <span class="text-[10px] font-bold text-emerald-600 uppercase mt-1">{{ sdgCommitment.metricUnit
                  }}</span>
              </div>
            </div>
            <div>
              <p class="text-[10px] font-bold text-emerald-600 tracking-widest uppercase mb-2"
                style="font-family: 'Montserrat', sans-serif;">{{
                sdgCommitment.metricLabel }}</p>
              <p class="text-2xl lg:text-3xl font-black text-slate-800 leading-tight"
                style="font-family: 'Noto Serif JP', serif;">エネルギーの完全自給</p>
            </div>
          </div>

          <p class="text-slate-600 text-sm lg:text-base leading-relaxed mb-10"
            style="font-family: 'Noto Sans JP', sans-serif;">
            {{ sdgCommitment.description }}
          </p>

          <div class="flex gap-4">
            @for (id of sdgCommitment.sdgs; track id) {
            <div class="flex flex-col items-center gap-2 group cursor-help">
              <div
                class="w-14 h-14 rounded-lg shadow-md flex items-center justify-center text-white text-xl font-black transition-all group-hover:-translate-y-1"
                [style.background-color]="getSdgColor(id)">
                {{ id }}
              </div>
            </div>
            }
            <div class="flex-grow flex items-end ml-2">
              <p class="text-[10px] font-bold text-slate-400 leading-tight italic">
                エネルギー、責任、気候変動への具体的アクション
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Section 3: 地域貢献 (High Visibility Roadmap) -->
  <div class="relative min-h-[90vh] flex items-center justify-center py-20 overflow-hidden bg-white">
    <!-- Technical "Road" Background (Hidden on mobile) -->
    <div class="absolute inset-0 z-0 pointer-events-none overflow-hidden hidden md:block">
      <div class="absolute inset-0 flex items-start justify-center opacity-50 pt-16">
        <img src="/images/soden_roadmap.png" alt="Soden Technical Roadmap"
          class="w-auto h-auto max-w-xl lg:max-w-2xl object-contain rotate-[10deg]">
      </div>
    </div>

    <!-- Background Slideshow (Faded for roadmap visibility) -->
    <div class="absolute inset-0 z-10 opacity-40">
      @for (img of community.images; track img; let i = $index) {
      <div class="absolute inset-0 transition-opacity duration-[2000ms] ease-in-out"
        [class.opacity-100]="communitySlideIndex === i" [class.opacity-0]="communitySlideIndex !== i">
        <img [src]="img" class="w-full h-full object-cover">
        <div class="absolute inset-0 bg-orange-950/40 mix-blend-multiply"></div>
      </div>
      }
    </div>

    <!-- Content Card -->
    <div class="relative z-10 w-full max-w-2xl px-4" appGsapAnimate [animation]="'scaleIn'" [duration]="1">
      <div
        class="bg-white/95 backdrop-blur-md rounded-[2.5rem] p-10 md:p-16 text-center shadow-2xl overflow-hidden relative">
        <div
          class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-sunset-orange/0 via-orange-500 to-sunset-orange/0">
        </div>

        <h4 class="text-sunset-orange font-bold tracking-widest text-sm mb-6 uppercase" appGsapAnimate
          [animation]="'fadeUp'">{{ community.subtitle }}</h4>
        <h2 class="text-3xl md:text-5xl font-black text-[#0C1C2D] leading-tight mb-10"
          style="font-family: 'Noto Serif JP', serif;" appGsapAnimate [animation]="'fadeUp'" [delay]="0.2">
          {{ community.title }}
        </h2>

        <p class="text-slate-600 leading-relaxed text-base lg:text-lg mb-12"
          style="font-family: 'Noto Sans JP', sans-serif;" appGsapAnimate [animation]="'fadeUp'" [delay]="0.4">
          {{ community.description }}
        </p>

        <!-- Activities -->
        <div class="flex flex-wrap justify-center gap-6 mb-12" appGsapAnimate [animation]="'fadeUp'" [delay]="0.6">
          @for (act of community.activities; track act.label) {
          <div class="group relative w-56 h-40 rounded-2xl overflow-hidden shadow-lg cursor-pointer bg-slate-100"
            appHoverLift>
            <img [src]="act.image" [alt]="act.label"
              class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
            <div
              class="absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent pt-10 pb-4 px-4 translate-y-2 group-hover:translate-y-0 transition-transform duration-300">
              <span
                class="text-white text-sm font-bold tracking-widest block text-center shadow-black drop-shadow-md">{{
                act.label }}</span>
            </div>
          </div>
          }
        </div>

        <!-- SDGs Note -->
        <div class="flex flex-col items-center gap-6" appGsapAnimate [animation]="'fadeUp'" [delay]="0.8">
          <div class="flex gap-4">
            @for (id of community.sdgs; track id) {
            <div class="w-12 h-12 rounded shadow flex items-center justify-center text-white text-lg font-black"
              [style.background-color]="getSdgColor(id)">
              {{ id }}
            </div>
            }
          </div>
          <p class="text-[10px] text-slate-400 leading-relaxed max-w-sm">
            ※スポーツを通じた健全な育成環境の提供は、貧困や飢餓の根本的解決、そして持続可能なまちづくり（ゴール1,2,11）に繋がると信じています。
          </p>
        </div>
      </div>
    </div>
  </div>

</section>